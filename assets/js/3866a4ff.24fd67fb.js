"use strict";(self.webpackChunkrob_18_n_documentation=self.webpackChunkrob_18_n_documentation||[]).push([[693],{5082:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>s,metadata:()=>a,toc:()=>d});var t=r(4848),o=r(8453);const s={sidebar_position:1},i="Javascript",a={id:"guide/usage/export/javascript",title:"Javascript",description:"To easily extend the JavaScript build process, you can add a custom script. Here\u2019s a step-by-step guide on how to do this:",source:"@site/docs/guide/usage/export/javascript.md",sourceDirName:"guide/usage/export",slug:"/guide/usage/export/javascript",permalink:"/app/docs/guide/usage/export/javascript",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"guideSidebar",previous:{title:"Export",permalink:"/app/docs/guide/usage/export/"},next:{title:"PHP (Laravel)",permalink:"/app/docs/guide/usage/export/php_laravel"}},c={},d=[{value:"Create a new file",id:"create-a-new-file",level:2},{value:"File contents",id:"file-contents",level:2},{value:"Adjust API Call Parameters",id:"adjust-api-call-parameters",level:3},{value:"Extend the package.json",id:"extend-the-packagejson",level:2},{value:"combine script",id:"combine-script",level:3},{value:"Run the script",id:"run-the-script",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"javascript",children:"Javascript"})}),"\n",(0,t.jsx)(n.p,{children:"To easily extend the JavaScript build process, you can add a custom script. Here\u2019s a step-by-step guide on how to do this:"}),"\n",(0,t.jsx)(n.h2,{id:"create-a-new-file",children:"Create a new file"}),"\n",(0,t.jsxs)(n.p,{children:["Create the file ",(0,t.jsx)(n.code,{children:"./scripts/rob18n.js"})]}),"\n",(0,t.jsx)(n.h2,{id:"file-contents",children:"File contents"}),"\n",(0,t.jsxs)(n.p,{children:["Copy the following code into the ",(0,t.jsx)(n.code,{children:"rob18n.js"})," file:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"import fetch from 'node-fetch';\nimport * as fs from 'fs';\nimport * as unzipper from 'unzipper';\nimport * as path from 'path';\n\nasync function handleLangFolder() {\n    if (!fs.existsSync('./src/lang')) {\n        fs.mkdirSync('./src/lang', { recursive: true });\n    }\n}\n\nhandleLangFolder().then(() => {\n    getData();\n});\n\nfunction getData() {\n    fetch('http://localhost:2402/language-key/export?project_id=27&languages=[\"de_DE\", \"en_US\"]&format=json', {\n        method: 'POST',\n    })\n        .then((response) => response.json())\n        .then((zipUrl) => {\n            downloadAndExtractZip(zipUrl, './src/lang');\n        })\n        .catch((error) => console.log(error));\n}\n\nfunction downloadAndExtractZip(url, destFolder) {\n    fetch(url)\n        .then(res => {\n            if (!res.ok) {\n                throw new Error(`Failed to fetch ${url}: ${res.statusText}`);\n            }\n            const tempFolder = path.join(destFolder, 'temp_unzip');\n            if (!fs.existsSync(tempFolder)) {\n                fs.mkdirSync(tempFolder);\n            }\n            return res.body.pipe(unzipper.Extract({ path: tempFolder }))\n                .promise()\n                .then(() => tempFolder);\n        })\n        .then(tempFolder => {\n            moveFilesFromSubfolder(tempFolder, destFolder);\n        })\n        .catch(err => console.log('Error downloading or extracting ZIP:', err));\n}\n\nfunction moveFilesFromSubfolder(srcFolder, destFolder) {\n    fs.readdir(srcFolder, (err, folders) => {\n        if (err) throw err;\n\n        const subfolderPath = path.join(srcFolder, folders[0]);\n\n        fs.readdir(subfolderPath, (err, files) => {\n            if (err) throw err;\n\n            files.forEach(file => {\n                const srcPath = path.join(subfolderPath, file);\n                const destPath = path.join(destFolder, file);\n\n                fs.rename(srcPath, destPath, (err) => {\n                    if (err) throw err;\n                    console.log(`Moved file: ${file} to ${destFolder}`);\n                });\n            });\n\n            fs.rmdir(srcFolder, { recursive: true }, (err) => {\n                if (err) throw err;\n                console.log(`Deleted temporary folder: ${srcFolder}`);\n            });\n        });\n    });\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"adjust-api-call-parameters",children:"Adjust API Call Parameters"}),"\n",(0,t.jsxs)(n.p,{children:["Before running the script, make sure to adjust the parameters in the API call according to your project needs. Specifically, you will need to modify the ",(0,t.jsx)(n.code,{children:"format"}),", ",(0,t.jsx)(n.code,{children:"project_id"})," and the list of ",(0,t.jsx)(n.code,{children:"languages"})," in the getData function:"]}),"\n",(0,t.jsx)(n.h2,{id:"extend-the-packagejson",children:"Extend the package.json"}),"\n",(0,t.jsx)(n.p,{children:"Add the new script command in your package.json:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'"scripts": {\n    "dev": "vite",\n\t...\n    "rob18n": "node ./scripts/rob18n.js"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"combine-script",children:"combine script"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'"scripts": {\n    "dev": "node ./scripts/rob18n.js && vite",\n\t...\n    "rob18n": "node ./scripts/rob18n.js"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Pay attention to the order. It is important to follow the correct sequence. The call to rob18n must come before serve."}),"\n",(0,t.jsx)(n.h2,{id:"run-the-script",children:"Run the script"}),"\n",(0,t.jsxs)(n.p,{children:["You can now run the script with the following command:\n",(0,t.jsx)(n.code,{children:"npm run rob18n"})]}),"\n",(0,t.jsx)(n.p,{children:"With these steps, you\u2019ve extended the build process to automatically download and integrate language files during the build."})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>a});var t=r(6540);const o={},s=t.createContext(o);function i(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);